!function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;a.GaxQueue||(a.GaxQueue={},d=1,e=2,f=3,g=document.head||document.getElementsByTagName("head")[0],h=function(b){return this instanceof h?(c=this,c.startTime=new Date,c.objid=Math.ceil(c.startTime),a.GaxQueue[c.objid]=c,this.url=b,c.args={},c.headerQueue={},c.headerQueue["Content-Type"]="application/x-www-form-urlencoded",c.status=d,c.successQueue=[],c.errorQueue=[],c.config={type:"text",timeout:0,ontimeout:function(){},com:"jsonp",jsonpCallBackKey:"callback",jsonpCallBack:!1,jsonpCallBackNode:null},this.isOrigin=i(),void 0):new h(b)},i=function(){var a=new RegExp("^"+window.location.origin,"i"),b=/^(?!http([s]?):\/\/)/i;return a.test(c.url)||b.test(c.url)},j=function(){c.config.jsonpCallBack&&(c.config.jsonpCallBackNode=document.createElement("script"),c.config.jsonpCallBackNode.innerHTML=";function "+c.config.jsonpCallBack+'(data) {GaxJsonp( "'+c.objid+'", data);}',g.appendChild(c.config.jsonpCallBackNode));var a=document.createElement("script");a.setAttribute("src",c.url+"?"+c.data),g.appendChild(a),c.jsonpNode=a},k=function(b,c){var d=a.GaxQueue[b];d.config.jsonpCallBack&&d.config.jsonpCallBackNode.remove(),d.jsonpNode.remove(),delete d.jsonpNode,d.resData=c,d.status=e,p(b)},l=function(a){var d,b=[];for(d in a)b.push(encodeURIComponent(d)),b.push("="),b.push(encodeURIComponent(a[d])),b.push("&");return i()||"jsonp"!==c.config.com.toLowerCase()?b.pop():c.config.jsonpCallBack?(b.push(c.config.jsonpCallBackKey),b.push("="),b.push(c.config.jsonpCallBack)):(b.push("gaxid"),b.push("="),b.push(c.objid)),b.join("")},m=function(){for(var a in c.headerQueue)c.xhr.setRequestHeader(a,c.headerQueue[a])},n=function(a){var a=a.toUpperCase(),b=c.url,d=null;switch(a){case"GET":b=c.url+"?"+c.data;break;case"POST":d=c.data}return c.args.url=c.url,c.args.data=c.data,c.args.obj=c,window.fetch?(fetch(b,{method:a,headers:c.headerQueue,body:d}).then(function(a){a.ok?a.text().then(function(b){c.resData=b,"json"===c.config.type.toLowerCase()&&(c.resData=JSON.parse(c.resData)),c.resHeaders=[],a.headers.forEach(function(a,b){c.resHeaders[b]=a}),c.status=e,p()}):(c.args.reason="Fetch Error:"+a.status+"!",c.status=f,p())},function(a){c.args.reason="Fetch Error:"+a.toString()+"!",c.status=f,p()}),!0):(c.baseAjaxRequest(),c.xhr.open(a,b,!0),m(),c.xhr.send(d),c.xhr.onreadystatechange=function(){4==c.xhr.readyState&&(200==c.xhr.status?(c.resData=null==JSON.stringify(c.xhr.responseXML)?c.xhr.responseText:c.xhr.responseXML,"json"===c.config.type.toLowerCase()&&(c.resData=JSON.parse(c.resData)),c.resHeaders=[],c.xhr.getAllResponseHeaders().split("\r\n").forEach(function(a){var b=a.split(/\s*:\s*/);""!=b[0]&&(c.resHeaders[b[0]]=b[1])}),c.status=e,p()):(c.args.reason="XMLHttpRequest Error:"+c.xhr.status+"!",c.status=f,p()))},c.xhr.onerror=function(){c.args.reason="XMLHttpRequest Error!",c.status=f,p()},c.xhr.ontimeout=function(){c.config.ontimeout.call(null),c.args.reason="Timeout!",c.status=f,p()},!0)},o=function(){"jsonp"===c.config.com.toLowerCase()&&j()},p=function(){if(arguments.length>0&&(c=a.GaxQueue[arguments[0]]),c.args.time=new Date-c.startTime,c.status!==d)if(c.status===e)for(;fn=c.successQueue.shift();)fn.call(null,c.resData,c.args);else for(;fn=c.errorQueue.shift();)fn.call(null,c.args)},h.prototype.baseAjaxRequest=function(){if(window.XMLHttpRequest)this.xhr=new XMLHttpRequest;else try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){throw new TypeError("Unsupport XMLHttpRequest")}}return this},h.prototype.header=function(a,b){return c.headerQueue[a]=b,this},h.prototype.set=function(a,b){return("jsonpCallBack"==a||"callback"==a)&&(a="jsonpCallBack"),c.config[a]=b,this},h.prototype.get=function(a){if(this.data=l(a),this.method="GET",this.isOrigin){var b=n("GET");b||p()}else o();return this},h.prototype.post=function(a){if(this.data=l(a),this.method="POST",this.isOrigin){var b=n("POST");b||p()}else o();return this},h.prototype.success=function(a){return c.status===d?c.successQueue.push(a):c.status===e&&a.call(null,c.resData,c.args),this},h.prototype.error=function(a){return c.status===d?c.errorQueue.push(a):c.status===f&&a.call(null,c.args),this},a.Gax=h,a.GaxJsonp=k)}(this);